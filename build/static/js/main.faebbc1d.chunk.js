(this["webpackJsonptipourboire-serveur"]=this["webpackJsonptipourboire-serveur"]||[]).push([[0],{208:function(e,t,a){e.exports=a(537)},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},511:function(e,t,a){},514:function(e,t,a){},515:function(e,t,a){},516:function(e,t,a){},518:function(e,t,a){},519:function(e,t,a){},520:function(e,t,a){},521:function(e,t,a){},522:function(e,t,a){},524:function(e,t,a){},525:function(e,t,a){},526:function(e,t,a){},528:function(e,t,a){},532:function(e,t,a){},533:function(e,t,a){},536:function(e,t,a){},537:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),s=a.n(o),l=(a(212),a(13)),c=a(14),i=a(16),m=a(15),u=(a(213),a(32)),p=a(98),d=(a(214),a(37)),h=a(202),f=a(11),g=a(38),E=a(18),v=a(47),b=a(545),y=a(121);y.a.initializeApp({apiKey:"AIzaSyAut6vqnimGfA8-stmTnB-q4tyrXv2aJow",authDomain:"tipourboire-57c09.firebaseapp.com",projectId:"tipourboire-57c09",storageBucket:"tipourboire-57c09.appspot.com",messagingSenderId:"592397685193",appId:"1:592397685193:web:e6c6a5fca6aeccef5f1818",measurementId:"G-5LS7DQYY60"}),y.a.analytics();var C=y.a.storage();a(218);function N(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],o=t[1],s=function(){return o(!1)},l=function(){return o(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{className:"buttonTuto",onClick:l},"Etapes obligatoires"," ",r.a.createElement(v.a,{onClick:l,className:"flecheTuto"},">")),r.a.createElement(b.a,{show:a,onHide:s,animation:!0,backdrop:"static",keyboard:!1},r.a.createElement(b.a.Body,null,r.a.createElement("p",{className:"paraTuto"},r.a.createElement(b.a.Title,null,"Comment b\xe9n\xe9ficier de mes pourboires ?"),r.a.createElement("br",null),r.a.createElement("br",null),"Afin d'activer votre compte Tipourboire et permettre \xe0 vos clients de vous remercier pour la qualit\xe9 de votre service",r.a.createElement("br",null),"C'est simple, il vous suffit :",r.a.createElement("br",null),"D'ins\xe9rer votre photo dans votre espace personnel s\xe9curis\xe9",r.a.createElement("br",null),"De renseigner vos coordonn\xe9es bancaires",r.a.createElement("br",null),"et de charger votre pi\xe8ce d'identit\xe9",r.a.createElement("br",null),'dans l\'espace "Mes documents"',r.a.createElement("br",null),"en suivant bien les instructions",r.a.createElement("br",null),r.a.createElement("br",null),"Bravo, vous pouvez d\xe9sormais b\xe9n\xe9ficier",r.a.createElement("br",null),"de nos services et booster vos pourboires !")),r.a.createElement(b.a.Footer,null,r.a.createElement(v.a,{className:"modalButton",variant:"secondary",onClick:s},"Fermer"))))}var w=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).modalReferent=function(){return r.a.createElement(b.a,{show:n.state.show,onHide:function(){n.setState({show:!1})},animation:!0,backdrop:!0,keyboard:!1,style:{overlay:{zIndex:3}}},r.a.createElement(b.a.Header,{closeButton:!0},r.a.createElement(b.a.Title,null,"Vous \xeates r\xe9f\xe9rent")),r.a.createElement(b.a.Body,null,r.a.createElement(E.a,{className:"affiPop"},r.a.createElement(f.a,{s:12,md:12},r.a.createElement("p",null,"L'un de vos \xe9tablissements vous a nomm\xe9 r\xe9f\xe9rent. Acc\xe9dez \xe0 votre espace r\xe9f\xe9rent pour en savoir plus")))))},n.abonnement=function(){var e=n.state.profil.stripeId;console.log(e),null===e&&alert("vous devez vous abonner pour b\xe9n\xe9ficier de l'app")},n.handleInput=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n.unSubscribe=function(){var e=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/unsubscribe",{method:"DELETE",headers:e}).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message}),n.setState({showModal:!1}),n.getMonProfil()}),(function(e){console.log(e)}))},n.renderMesHistory=function(){if(Array.isArray(n.state.profil.history))return n.state.profil.history.length>0?n.state.profil.history.map((function(e,t){return r.a.createElement("div",{className:"historique",key:t},r.a.createElement("p",{className:"pourboire"},"vous avez re\xe7u ",e.amount,"\u20ac le ",e.date,"."))})):r.a.createElement("p",{className:"pourboire"},"Vous n'avez re\xe7u aucun pourboire pour l'instant.")},n.getMonProfil=function(){var e=new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"});fetch("https://back-end.osc-fr1.scalingo.io/serveur/monProfil",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){var t=e;n.setState({profil:t}),localStorage.getItem("popup")?n.setState({show:!1}):(console.log("laaaa"),e.mangoWalletReferent&&(n.setState({show:!0}),localStorage.setItem("popup",!0)))}),(function(e){console.log(e)}))},n.deleteAffiliation=function(e){var t=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")}),a={method:"DELETE",body:JSON.stringify({}),headers:t};fetch("https://back-end.osc-fr1.scalingo.io/serveur/deleteWaiter",a).then((function(e){return e.json()})).then((function(e){n.getWaiterList()}),(function(e){console.log(e)}))},n.infoStripe=function(){var e=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/customerAccount",{method:"get",headers:e}).then((function(e){return e.json()})).then((function(e){window.open(e,"_blank")}))},n.getRestaurantList=function(){var e=new Headers({Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/restaurantList",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){n.setState({restaurant:e})}),(function(e){console.log(e)}))},n.postParrainage=function(e){e.preventDefault();var t={email:n.state.email},a=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+localStorage.getItem("token")}),r={method:"POST",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/emailParrainage?_id="+n.state.email+"&mailSender="+n.state.profil.email,r).then((function(e){return e.json()})).then((function(e){n.setState({messageParrainage:e.message})}))},n.renderCompteReferent=function(){if(n.state.profil.mangoWalletReferent)return r.a.createElement(v.a,{className:" referentButton",href:"/referent"},"Mon compte R\xe9f\xe9rent")},n.renderMesRestau=function(){return n.state.restaurant.length?n.state.restaurant.map((function(e){return r.a.createElement("div",{className:"articles"},r.a.createElement("h4",{className:"titre"},e.restaurantName))})):r.a.createElement("h4",{className:"Nocoms"},"Vous n'\xeates pas encore affili\xe9 \xe0 un \xe9tablissement")},n.modalUnsubscribe=function(){return r.a.createElement(b.a,{show:n.state.showModal,onHide:function(){n.setState({showModal:!1})}},r.a.createElement(b.a.Header,{closeButton:!0},r.a.createElement(b.a.Title,{className:"modalTitle"},"R\xe9siliation abonnement")),r.a.createElement(b.a.Body,{className:"modalBody"},"Etes vous sur de vouloir r\xe9silier votre abonnement Tipourboire ?"," "),r.a.createElement(b.a.Footer,null,r.a.createElement(v.a,{className:"modalButton",variant:"secondary",onClick:function(){n.unSubscribe()}},"R\xe9silier"),r.a.createElement(v.a,{className:"modalButton",variant:"primary",onClick:function(){n.setState({showModal:!1})}},"Annuler")))},n.state={profil:{restaurant:{}},wallet:1,history:[],stripeUrl:"",restaurant:[],showModal:!1,show:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getMonProfil(),this.getRestaurantList()}},{key:"render",value:function(){return r.a.createElement(g.a,{className:"contain parrainage"},this.modalUnsubscribe(),this.modalReferent(),r.a.createElement(E.a,{className:"mescartes"},r.a.createElement(f.a,{className:"mesdetails",sm:12,md:12},r.a.createElement(E.a,{className:"centerPic"},r.a.createElement(f.a,{s:6,md:8,className:"colPhoto"},r.a.createElement(h.a,{className:"photoProfil",src:"https://s3.amazonaws.com/b.c.bucket.tipourboire/"+this.state.profil.picture,roundedCircle:!0}))),r.a.createElement(f.a,{md:{span:9,offset:7},className:"colTuto"},r.a.createElement(N,null)),r.a.createElement("div",{className:"infoProfil"},r.a.createElement("h1",{className:"titreNice"},"Bienvenue"),r.a.createElement("h1",null,this.state.profil.firstname," ",this.state.profil.lastname))),r.a.createElement(f.a,{className:"monrestaurant",sm:12,md:12},r.a.createElement("h1",{className:"ligne"},"Mes \xe9tablissements de rattachement "),this.renderMesRestau())),r.a.createElement(E.a,{className:"rowButton"},r.a.createElement(f.a,{xs:12,s:12,md:6,lg:6},r.a.createElement(v.a,{className:"buttonAbo",href:"/cagnotte"},"Mes pourboires")),r.a.createElement(f.a,{xs:12,s:12,md:6,lg:6},r.a.createElement(v.a,{className:"buttonModifier marginPhone  ",href:"/mesHistoriques"},"Mon historique de pourboire"))),r.a.createElement(E.a,{className:"rowDocument"},r.a.createElement(f.a,{xs:12,md:6,lg:6},r.a.createElement(v.a,{className:"buttonAbo ",href:"/mesDocuments"},"Mes documents")),r.a.createElement(f.a,{classeName:"colModifier",xs:12,md:6,lg:6},r.a.createElement(d.b,{to:"/modifierMonProfil",className:"modif"},r.a.createElement("button",{className:"buttonModifier "},"Modifier mon profil")))),r.a.createElement(E.a,{className:"rowHisto"},r.a.createElement(f.a,{md:6,lg:6},r.a.createElement(v.a,{className:"buttonModifier lienCommentaire",href:"/mesTips"},"Mes commentaires re\xe7us")),r.a.createElement(f.a,{sm:12,md:6,lg:6},this.renderCompteReferent())))}}]),a}(n.Component),S=a(7),k=(a(511),a(512),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInput=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n.addLogin=function(e){e.preventDefault();var t={email:n.state.email,password:n.state.password},a=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),r={method:"POST",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/login",r).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message}),console.log("data"),e.token&&(localStorage.setItem("token",e.token),localStorage.setItem("userID",e.userId),localStorage.setItem("email",e.email),localStorage.setItem("password",e.password),n.props.setLogin(!0),n.props.history.push("/monprofil"))}))},n.state={email:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){localStorage.clear(),this.props.setLogin(!1),this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement(g.a,{className:"connexion-container"},r.a.createElement(E.a,null,r.a.createElement(f.a,null,r.a.createElement("h1",null,"D\xe9ja inscrit ? "),r.a.createElement("h1",null,"Connectez-vous !"))),r.a.createElement(S.a.Group,{controlId:"formBasicEmail"},r.a.createElement(S.a.Control,{name:"email",type:"email",ClassName:"formMail",placeholder:"Votre e-mail",id:"email",onChange:this.handleInput,value:this.state.email}),r.a.createElement(S.a.Control,{name:"password",type:"password",ClassName:"formMail",placeholder:"Votre mot de passe",id:"password",onChange:this.handleInput,value:this.state.password})),r.a.createElement(f.a,{className:"colMdp",xs:12,md:12},r.a.createElement(d.b,{className:"forgetpwd",to:"/passwordReset"},r.a.createElement("p",null,"Mot de passe oubli\xe9 ?"))),r.a.createElement(f.a,{md:12,className:"blocCompte"},r.a.createElement(v.a,{className:"connectButton",onClick:this.addLogin},"Se connecter"),r.a.createElement("p",null,this.state.message)),r.a.createElement(f.a,{className:"alignRight"},r.a.createElement(S.a.Label,{className:"text2"},"Pas encore inscrit ?"," ",r.a.createElement(d.b,{className:"creerCompte",to:"/Inscription"},"Cr\xe9er mon compte"))))}}]),a}(n.Component)),I=(a(514),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInput=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n.addNewRegister=function(e){e.preventDefault();var t={firstname:n.state.firstname,lastname:n.state.lastname,city:n.state.city,adress:n.state.adress,postalCode:n.state.code,date:n.state.date,email:n.state.email,phone:n.state.phone,password:n.state.password,acceptControl:n.state.acceptControl,subscribe:n.state.inscrit,gestioName:n.state.gestioName,gestioID:n.state.gestioID},a=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),r={method:"POST",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/register",r).then((function(e){return e.json()})).then((function(e){console.log(e.success),n.setState({message:e.message})}),(function(e){console.log(e)}))},n.test=function(){console.log("fdsfdsf",n.state)},n.state={inscrit:"",gestioName:"",gestioID:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(window.location.search).get("subscribe"),a=new URLSearchParams(window.location.search).get("gestioName"),n=new URLSearchParams(window.location.search).get("gestionnaireID");this.setState({inscrit:t}),this.setState({gestioName:a}),this.setState({gestioID:n},(function(){console.log(e.state,n)}))}},{key:"render",value:function(){var e=this;return r.a.createElement(g.a,{className:"inscr"},this.test(),r.a.createElement(E.a,{className:"RowInscr"},r.a.createElement(f.a,{md:12,className:"Titre",sm:12},r.a.createElement("h1",{className:"titreh1"},"Cr\xe9er mon compte "),r.a.createElement("p",{className:"Titrep"},"Merci de remplir les informations ci-dessous pour finaliser la cr\xe9ation de votre compte.")),r.a.createElement(E.a,{className:"centerInscr"},r.a.createElement(f.a,{md:9},r.a.createElement(S.a,{onSubmit:this.addNewRegister},r.a.createElement(S.a.Group,{controlId:"lastname"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Nom",name:"lastname",onChange:this.handleInput,value:this.state.lastname,className:"tailleInscr"})),r.a.createElement(S.a.Group,{controlId:"firstname"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Pr\xe9nom",name:"firstname",onChange:this.handleInput,value:this.state.firstname,className:"tailleInscr"})),r.a.createElement(S.a.Group,{controlId:"date"},r.a.createElement(S.a.Control,{type:"date",placeholder:"jj/mm/aaaa",name:"date",onChange:this.handleInput,value:this.state.date,className:"tailleInscr"})),r.a.createElement(S.a.Group,{controlId:"adress"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Adresse",name:"adress",onChange:this.handleInput,value:this.state.adress,className:"tailleInscr"})),r.a.createElement(S.a.Group,{controlId:"code"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Code Postal",name:"code",onChange:this.handleInput,value:this.state.code,className:"tailleInscr"})),r.a.createElement(S.a.Group,{controlId:"city"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Ville",name:"city",onChange:this.handleInput,value:this.state.city,className:"tailleInscr"})),r.a.createElement(S.a.Group,{controlId:"phone"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Telephone(Facultatif)",name:"phone",onChange:this.handleInput,value:this.state.phone,className:"tailleInscr"})),r.a.createElement(S.a.Group,{controlId:"email"},r.a.createElement(S.a.Control,{type:"mail",placeholder:"Email ",name:"email",onChange:this.handleInput,value:this.state.email,className:"tailleInscr"})),r.a.createElement(S.a.Group,{controlId:"password"},r.a.createElement(S.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:this.handleInput,value:this.state.password,className:"tailleInscr"})),r.a.createElement(S.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(S.a.Check,{className:"checkboxCGU",type:"checkbox",name:"acceptControl",label:"J'ai lu et j'accepte les CGU et CGV",onChange:this.handleInput,value:this.state.acceptControl,required:!0}),r.a.createElement("a",{className:"cgvLink",href:"/CGV_TIPTOTHANK.pdf",target:"_blanck"},"CGU & CGV")),r.a.createElement(E.a,{className:"centerInscr"},r.a.createElement(f.a,{md:5,className:"centerInscr"},r.a.createElement(v.a,{className:"connectServeur",variant:"primary",block:!0,type:"submit",onClick:function(){e.state.acceptControl?e.addNewRegister():e.setState({message:"Veuillez accepter les conditions g\xe9n\xe9rales d'utilisations."})}},"S'inscrire")))),r.a.createElement("p",{className:"annonce"},"*TIPOURBOIRE est responsable du traitement des donn\xe9es personnelles collect\xe9es sur ce site. Elles sont collect\xe9es aux fins de : l'ex\xe9cution du contrat/vous informer de nos nouveaut\xe9s et actualit\xe9s/\xe0 des fins statistiques, les bases l\xe9gales respectives des traitements pouvant \xeatre l'ex\xe9cution du contrat, l'int\xe9r\xeat l\xe9gitime, ou le consentement. Pour plus d'informations voir notre politique de confidentialit\xe9."),r.a.createElement("p",null,this.state.message)))))}}]),a}(n.Component)),j=(a(515),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInput=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n.addNewRegister=function(e){e.preventDefault();var t={firstname:n.state.firstname,lastname:n.state.lastname,city:n.state.city,adress:n.state.adress,staff:n.state.staff,date:n.state.date,email:n.state.email,phone:n.state.phone,password:n.state.password,acceptControl:n.state.acceptControl},a=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),r={method:"POST",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/inscriptionParrainage",r).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message})}),(function(e){console.log(e)}))},n.state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(g.a,{className:"inscr"},r.a.createElement(f.a,{md:12,className:"Titre",sm:12},r.a.createElement("h1",{className:"titreh1"},"Vous avez \xe9t\xe9 parrain\xe9, cr\xe9e votre compte afin de profiter de votre offre."," "),r.a.createElement("p",{className:"Titrep"},"Merci de remplir les informations ci-dessous pour finaliser la cr\xe9ation de votre compte.")),r.a.createElement(E.a,{className:"centerInscr"},r.a.createElement(f.a,{md:8},r.a.createElement(S.a.Group,{controlId:"lastname"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Nom",name:"lastname",onChange:this.handleInput,value:this.state.lastname})),r.a.createElement(S.a.Group,{controlId:"firstname"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Pr\xe9nom",name:"firstname",onChange:this.handleInput,value:this.state.firstname})),r.a.createElement(S.a.Group,{controlId:"date"},r.a.createElement(S.a.Control,{type:"date",placeholder:"Date de naissance",name:"date",onChange:this.handleInput,value:this.state.date})),r.a.createElement(S.a.Group,{controlId:"adress"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Adresse",name:"adress",onChange:this.handleInput,value:this.state.adress})),r.a.createElement(S.a.Group,{controlId:"city"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Ville",name:"city",onChange:this.handleInput,value:this.state.city})),r.a.createElement(S.a.Group,{controlId:"phone"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Telephone(Facultatif)",name:"phone",onChange:this.handleInput,value:this.state.phone})),r.a.createElement(S.a.Group,{controlId:"staff"},r.a.createElement(S.a.Control,{as:"select",type:"text",name:"staff",onChange:this.handleInput,value:this.state.staff},r.a.createElement("option",null,"-"),r.a.createElement("option",null,"Commis"),r.a.createElement("option",null,"Chef de rang"),r.a.createElement("option",null,"Ma\xeetre d'h\xf4tel"),r.a.createElement("option",null,"Barman"),r.a.createElement("option",null,"Cuisinier"),r.a.createElement("option",null,"Accueil"))),r.a.createElement(S.a.Group,{controlId:"email"},r.a.createElement(S.a.Control,{type:"mail",placeholder:"Email ",name:"email",onChange:this.handleInput,value:this.state.email})),r.a.createElement(S.a.Group,{controlId:"password"},r.a.createElement(S.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:this.handleInput,value:this.state.password})),r.a.createElement(S.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(S.a.Check,{className:"checkboxCGUParrainage",type:"checkbox",name:"acceptControl",label:"J'ai lu et j'accepte les CGU et CGV",onChange:this.handleInput,value:this.state.acceptControl,required:!0}),r.a.createElement("a",{className:"cgvLink",href:"/CGV_TIPTOTHANK.pdf",target:"_blanck"},"CGU & CGV")),r.a.createElement(E.a,{className:"centerInscr"},r.a.createElement(f.a,{md:5,className:"centerInscr"},r.a.createElement(v.a,{className:"connectServeur",variant:"primary",block:!0,type:"submit",onClick:function(){e.state.acceptControl?e.addNewRegister():e.setState({message:"Veuillez accepter les conditions g\xe9n\xe9rales d'utilisations."})}},"S'inscrire"))),r.a.createElement("p",{className:"annonceParrainage"},"*TIPOURBOIRE est responsable du traitement des donn\xe9es personnelles collect\xe9es sur ce site. Elles sont collect\xe9es aux fins de : l'ex\xe9cution du contrat/vous informer de nos nouveaut\xe9s et actualit\xe9s/\xe0 des fins statistiques, les bases l\xe9gales respectives des traitements pouvant \xeatre l'ex\xe9cution du contrat, l'int\xe9r\xeat l\xe9gitime, ou le consentement. Pour plus d'informations voir notre politique de confidentialit\xe9."),r.a.createElement("p",null,this.state.message))))}}]),a}(n.Component)),O=(a(516),a(205)),T=a.n(O),M=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getMesCommentaires=function(){console.log("coucou");var e=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/mesCommentaires",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){var t=e;n.setState({mesComs:t}),console.log(n.state.mesComs)}),(function(e){console.log(e)}))},n.renderMesCommentaires=function(){return n.state.mesComs.commentaires.length?n.state.mesComs.commentaires.map((function(e,t){return r.a.createElement("div",{className:"divCom",key:t},r.a.createElement("div",{className:"nomPrenom"},r.a.createElement("h2",{className:"prenomCom"},e.prenom)," ",r.a.createElement("h2",{className:"nomCom"},e.nom," ")),r.a.createElement("div",null,r.a.createElement(T.a,{format:"DD/MM/YYYY, h:mm "},e.date)),r.a.createElement("div",null,r.a.createElement("p",{className:"statut2"},e.texte)))})):r.a.createElement("h4",{className:"Nocoms"},"Vous n'avez pas encore de commentaires")},n.state={mesComs:{commentaires:[]}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getMesCommentaires()}},{key:"render",value:function(){return r.a.createElement(g.a,{className:"mesComs"},r.a.createElement(E.a,null,r.a.createElement(f.a,null,r.a.createElement("h1",{className:"titreComs"},"Mes commentaires"))),r.a.createElement(E.a,{className:"commentaireBackground"},r.a.createElement(f.a,null,this.renderMesCommentaires())))}}]),a}(n.Component),P=a(84),R=a.n(P),D=a(116);a(518);function A(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)(""),c=Object(p.a)(l,2),i=(c[0],c[1]);return Object(n.useEffect)((function(){!function(){var e=new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"});fetch("https://back-end.osc-fr1.scalingo.io/serveur/monProfil",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){console.log("response",e)}),(function(e){console.log(e)}))}()}),[]),Object(n.useEffect)((function(){console.log("image",o)}),[o]),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new FormData(e.target),a=new Headers({"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/editlogo",{method:"PUT",body:t,headers:a}).then((function(e){return e.json()})).then((function(e){i(e.message);var t=new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"});fetch("https://back-end.osc-fr1.scalingo.io/serveur/monProfil",{method:"GET",headers:t}).then((function(e){return e.json()})).then(function(){var e=Object(D.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("coucou",t.picture),s(t.picture);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.log("err",e)}))}),(function(e){console.log(e)}))},className:"formLogo"},""===o?r.a.createElement("img",{className:"serveurPicture",src:"https://s3.amazonaws.com/b.c.bucket.tipourboire/"+e.picture}):r.a.createElement("img",{className:"serveurPicture",src:"https://s3.amazonaws.com/b.c.bucket.tipourboire/"+o}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{className:"chargePic",type:"file",name:"file",onChange:function(e){s(e.target.files[0])}}),r.a.createElement("button",{className:"button",type:"submit",onClick:function(e){null!=o&&C.ref("/PictureServeur/".concat(o.name)).put(o).on("state_changed",alert("Votre logo a bien \xe9t\xe9 enregistr\xe9"),alert)}},"T\xe9l\xe9charger")))}var H=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).change=function(e){var t=n.state.serveur;t[e.target.name]=e.target.value,n.setState({serveur:t})},n.postDataServeur=function(){var e=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")}),t={userId:localStorage.getItem("userId")},a={method:"POST",body:JSON.stringify(t),headers:e};fetch("https://back-end.osc-fr1.scalingo.io/serveur/dataProfil",a).then((function(e){return e.json()})).then((function(e){var t=e;n.setState({serveur:t,object:t}),console.log(n.state)}),(function(e){console.log(e)}))},n.editserveur=function(e){e.preventDefault();var t={userId:localStorage.getItem("userID"),serveur:n.state.serveur},a=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")}),r={method:"PUT",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/edit",r).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message})}),(function(e){console.log(e)}))},n.modifProfilLogo=function(e){e.preventDefault();var t=new FormData(e.target),a=new Headers({"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/editlogo",{method:"PUT",body:t,headers:a}).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message}),n.postDataServeur()}),(function(e){console.log(e)}))},n.state={serveur:{}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.postDataServeur()}},{key:"render",value:function(){return r.a.createElement("div",{className:"bloc-modifierProfil"},r.a.createElement(E.a,null,r.a.createElement(f.a,{md:{span:12,offset:3},className:"titreModif"},r.a.createElement("p",null,"Modifier mon profil"),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{controlId:"formGroupName"},r.a.createElement(S.a.Control,{name:"lastname",type:"text",placeholder:"Nom",onChange:this.change,value:this.state.serveur.lastname})),r.a.createElement(S.a.Group,{controlId:"formGroupPrenom"},r.a.createElement(S.a.Control,{name:"firstname",type:"text",placeholder:"Pr\xe9nom",onChange:this.change,value:this.state.serveur.firstname})),r.a.createElement(S.a.Group,{controlId:"formAdresse"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Adresse",name:"adress",onChange:this.change,value:this.state.serveur.adress})),r.a.createElement(S.a.Group,{controlId:"formVille"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Ville",name:"city",onChange:this.change,value:this.state.serveur.city})),r.a.createElement(S.a.Group,{controlId:"formTel"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Code postal",name:"postalCode",onChange:this.change,value:this.state.serveur.postalCode})),r.a.createElement(S.a.Group,{controlId:"formTel"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Telephone(Facultatif)",name:"phone",onChange:this.change,value:this.state.serveur.phone})),r.a.createElement(S.a.Group,{controlId:"formPoste"})),r.a.createElement("label",null,"Photo : "),r.a.createElement(A,{picture:this.state.serveur.picture}),r.a.createElement(v.a,{className:"submitButton",variant:"primary",type:"submit",onClick:this.editserveur},"Mettre \xe0 jour mon profil"),r.a.createElement("p",null,this.state.message))))}}]),a}(n.Component),x=(a(519),a(67)),L=a(206),z=(a(520),a(521),{style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}),B=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("label",null,"Card details",r.a.createElement(x.CardElement,{options:z})))}}]),a}(n.Component);function q(){var e=Object(x.useStripe)(),t=Object(x.useElements)(),a=function(){var a=Object(D.a)(R.a.mark((function a(n){var r,o,s,l,c,i;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=function(e){var t=e.customerId,a=e.paymentMethodId,n=e.priceId;return fetch("https://back-end.osc-fr1.scalingo.io/serveur/createsubscription",{method:"post",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({customerId:t,paymentMethodId:a,priceId:"price_1IGLE1Hoh2Vgz5QdCuVYaQLf"})}).then((function(e){return e.json()})).then((function(e){if(e.error)throw window.alert(e.message),e;return e})).then((function(e){return window.alert(e.message),{paymentMethodId:a,priceId:n,subscription:e}}))},n.preventDefault(),e&&t){a.next=4;break}return a.abrupt("return");case 4:return r=t.getElement(x.CardElement),a.next=7,e.createPaymentMethod({type:"card",card:r});case 7:o=a.sent,s=o.error,l=o.paymentMethod,s?console.log("[createPaymentMethod error]",s):(console.log("[PaymentMethod]",l),c=l.id,"","",i({customerId:"",paymentMethodId:c,priceId:""}));case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("form",{className:"coForm",onSubmit:a},r.a.createElement(B,null),r.a.createElement(S.a.Check,{className:"checkboxRet",type:"checkbox",name:"retractation",label:" Je renonce \xe0 mon droit de r\xe9tractation d'une dur\xe9e de 14 jours, afin que le service commence imm\xe9diatement. ",required:!0}),r.a.createElement("button",{className:"submitButtonSub",disabled:!e},"Devenir un Serveur Premium"))}var G=Object(L.a)("pk_live_51HAxRlHoh2Vgz5Qdxu3AGz9GC1q2B453vaXplDn3J0Q5wXRCZqwkuoCG5O1Nsr1VsbNIHmjVWj7XJo9cZmljPw7L00wQbxBO6Y"),X=(n.Component,a(522),a(544)),V=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).connect=function(){return n.props.login?r.a.createElement(g.a,{fluid:!0},r.a.createElement(E.a,{className:"partie1"},r.a.createElement(X.a,{className:"nav justify-content-right"},r.a.createElement(X.a.Toggle,{alignRight:!0,variant:"success",id:"dropdown-basic"},r.a.createElement("a",null,r.a.createElement("img",{src:"/images/user.png"}))),r.a.createElement(X.a.Menu,null,r.a.createElement(X.a.Item,{href:"/MonProfil"},"Profil"),r.a.createElement(X.a.Item,{onClick:function(){localStorage.clear(),n.props.setLogin(!1),n.props.history.push("/")},href:"/"},"D\xe9connexion"))),r.a.createElement(f.a,{className:"logoPartie1",md:12},r.a.createElement("a",{href:"https://tipourboire.com"},r.a.createElement("img",{src:"/images/logoJaune.png"}))))):r.a.createElement(g.a,{fluid:!0},r.a.createElement(E.a,{className:"partie1"},r.a.createElement(X.a,{className:"nav justify-content-right"},r.a.createElement(X.a.Toggle,{alignRight:!0,variant:"success",id:"dropdown-basic"},r.a.createElement("img",{src:"/images/user.png"})),r.a.createElement(X.a.Menu,null,r.a.createElement(X.a.Item,{href:"/inscription"},"Inscription"),r.a.createElement(X.a.Item,{href:"/"},"Connexion"))),r.a.createElement(f.a,{className:"logoPartie1",md:12},r.a.createElement("a",{href:"https://tipourboire.com/"},r.a.createElement("img",{src:"/images/logoJaune.png"})))))},n.state={},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.connect(),console.log("coucou",this.props.login)}},{key:"render",value:function(){return r.a.createElement("div",{className:"barre-de-menu"},this.connect())}}]),a}(n.Component),W=(a(524),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInput=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n.passwordRenew=function(e){if(e.preventDefault(),n.state.email&&n.state.password){var t={email:n.state.email,password:n.state.password,token:n.props.match.params.token},a={method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(t)};fetch("https://back-end.osc-fr1.scalingo.io/serveur/password-renew",a).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message})}),(function(e){console.log(e)}))}},n.state={email:"",password:"",message:""},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(g.a,{className:"renewPass"},r.a.createElement(E.a,null,r.a.createElement(f.a,{className:"PassRenewCol",md:12},r.a.createElement("h1",{className:"newPass"}," Votre nouveau mot de passe"),r.a.createElement("form",{className:"formRenew",onSubmit:this.passwordRenew},r.a.createElement("input",{className:"inputRenew",type:"email",id:"email",name:"email",onChange:this.handleInput,placeholder:"Email"}),r.a.createElement("br",null),r.a.createElement("input",{className:"inputRenew",type:"password",id:"password",name:"password",onChange:this.handleInput,placeholder:"Nouveau mot de passe"}),r.a.createElement("br",null),r.a.createElement(v.a,{onClick:this.passwordRenew,className:"renewButton"},"Valider")),r.a.createElement("p",null,this.state.message))))}}]),a}(n.Component)),U=(a(525),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInput=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n.passwordReset=function(e){if(e.preventDefault(),n.state.email){var t={email:n.state.email},a={method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(t)};fetch("https://back-end.osc-fr1.scalingo.io/serveur/password-reset",a).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message})}),(function(e){console.log(e)}))}},n.state={email:"",message:""},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(g.a,{className:"passwordReset"},r.a.createElement(E.a,null,r.a.createElement(f.a,{className:"PassResetCol",md:12},r.a.createElement("div",{className:"PassResetDiv"},r.a.createElement("h1",{className:"taille"},"Veuillez saisir votre mail "),r.a.createElement("h1",{className:"titrePass taille"},"pour r\xe9initialiser votre mot de passe"," "),r.a.createElement("form",{className:"formReset",onSubmit:this.passwordReset},r.a.createElement("input",{className:"inputReset",type:"email",id:"email",name:"email",onChange:this.handleInput,placeholder:"Email"})))),r.a.createElement(f.a,{className:"ButtonReset",md:12},r.a.createElement(v.a,{onClick:this.passwordReset,className:"resetButton"},"Confirmer"),r.a.createElement("p",null,this.state.message))))}}]),a}(n.Component)),F=(a(526),a(547)),J=a(546),_=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).deleteProfil=function(e){var t={userId:localStorage.getItem("userID"),profil:n.state.profil},a=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")}),r={method:"DELETE",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/delete",r).then((function(e){return e.json()})).then((function(){window.location.href="https://serveur.tipourboire.com/"}),(function(e){console.log(e)}))},n.modalDelete=function(){return r.a.createElement(b.a,{show:n.state.showModal,onHide:function(){n.setState({showModal:!1})}},r.a.createElement(b.a.Header,{closeButton:!0},r.a.createElement(b.a.Title,{className:"modalTitle"},"Supprimer mon compte")),r.a.createElement(b.a.Body,{className:"modalBody"},"Etes vous sur de vouloir supprimer votre compte Tipourboire ?"," "),r.a.createElement(b.a.Footer,null,r.a.createElement(v.a,{className:"modalButtonDelete",variant:"secondary",onClick:function(){n.deleteProfil()}},"Supprimer"),r.a.createElement(v.a,{className:"modalButtonDelete",variant:"primary",onClick:function(){n.setState({showModal:!1})}},"Annuler"),n.state.message))},n.state={showModal:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"footer"},this.modalDelete(),r.a.createElement(F.a,{fixed:"bottom",collapseOnSelect:!0,expand:"lg",bg:"#edeaea"},r.a.createElement(F.a.Brand,{href:"#home",className:"textFooter"},"@Tipourboire"),r.a.createElement(F.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(F.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(J.a,{className:"mr-auto"},r.a.createElement(J.a.Link,{href:"/mentionsLegales/mentionsL\xe9gales.pdf",className:"textFooter"},"Mentions L\xe9gales"),r.a.createElement(J.a.Link,{href:"/CGV/CGA.pdf",className:"textFooter"},"CGA"),r.a.createElement(J.a.Link,{href:"/confidentialit\xe9/Politique_de_confidentialit\xe9_serveur.pdf",className:"textFooter"},"Confidentialit\xe9"),r.a.createElement(J.a.Link,{href:"/cookies/POLITIQUE_DE_COOKIES.pdf",className:"textFooter"},"Cookies"),r.a.createElement(J.a.Link,{href:"mailto:contact@tipourboire.com",className:"textFooter"},"Contact"),localStorage.getItem("token")?r.a.createElement(J.a.Link,{className:"textFooter",onClick:function(){return e.setState({showModal:!0})}},"Supprimer mon compte"):null),r.a.createElement(J.a,null,r.a.createElement(J.a.Link,{eventKey:2,href:"https://tipourboire.com",className:"textFooter"},"A propos")))))}}]),a}(n.Component),K=(a(527),a(24)),Y=(a(528),a(207)),Q=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderMesHistory=function(){if(Array.isArray(n.state.profil.history))return n.state.profil.history.length>0?n.state.profil.history.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",{type:"text",id:"montant",name:"montant"}," ",Math.round(e.amount/10)/10,"\u20ac"),r.a.createElement("td",{type:"date",id:"date",name:"date"}," ",new Date(e.date).toLocaleDateString()))})):r.a.createElement("p",{className:"pourboire"},"Vous n'avez re\xe7u aucun pourboire pour l'instant.")},n.getMonProfil=function(){var e=new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"});fetch("https://back-end.osc-fr1.scalingo.io/serveur/monProfil",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){var t=e;n.setState({profil:t}),console.log(n.state.profil)}),(function(e){console.log(e)}))},n.state={profil:{restaurantName:{}},wallet:1,history:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getMonProfil()}},{key:"render",value:function(){return r.a.createElement(g.a,{className:"mesHisto"},r.a.createElement(E.a,null,r.a.createElement(f.a,null,r.a.createElement("h1",{className:"titreHisto"},"Mon Historique de pourboire"))),r.a.createElement(E.a,{class:"table-responsive-sm"},r.a.createElement(Y.a,{class:"table-responsive-sm",striped:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Montant"),r.a.createElement("th",null,"Date"))),r.a.createElement("tbody",null,this.renderMesHistory()))))}}]),a}(n.Component),Z=(a(529),a(532),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).addBankAccount=function(e){e.preventDefault();var t={adress:n.state.adress,password:n.state.password,city:n.state.city,region:n.state.region.country.toUpperCase(),zip:n.state.zip,iban:n.state.iban,country:n.state.country.toUpperCase()},a=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+localStorage.getItem("token")}),r={method:"POST",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/mangoBank",r).then((function(e){return e.json()})).then((function(e){"param_error"===e.Type?window.alert("Une erreur s'est produite, veuillez r\xe9essayer."):window.alert("Votre compte bancaire \xe0 bien \xe9t\xe9 enregistr\xe9 vous pouvez maintenant retirer votre argent.")}))},n.payoutMangoPay=function(e){e.preventDefault();var t={adress:n.state.adress,password:n.state.password,city:n.state.city,region:n.state.region,zip:n.state.zip,iban:n.state.iban},a=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+localStorage.getItem("token")}),r={method:"POST",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/payoutMango",r).then((function(e){return e.json()})).then((function(e){n.setState({messageTransfert:e.messageTransfert})}))},n.change=function(e){var t=n.state.document;t[e.target.name]=e.target.value,n.setState({document:t})},n.handleInput=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n.getWalletAmount=function(){var e=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/getWalet",{method:"get",headers:e}).then((function(e){return e.json()})).then((function(e){n.setState({amount:e})}))},n.onSubmit=function(e){e.preventDefault();var t=new FormData(e.target),a=new Headers({Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/mangoKYC",{method:"POST",body:t,headers:a}).then((function(e){return e.json()})).then((function(e){"param_error"===e.Type?window.alert("Une erreur s'est produite, veuillez r\xe9essayer."):(console.log(e),window.alert("Vos documents ont bien \xe9t\xe9 envoy\xe9s une r\xe9ponse vous sera fourni dans les 24 heures."))}))},n.getMonProfil=function(){var e=new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"});fetch("https://back-end.osc-fr1.scalingo.io/serveur/monProfil",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){var t=e;n.setState({profil:t}),console.log("dsqdsqdsqwsxdqsddqsdsq",n.state.profil.kycStatut)}),(function(e){console.log(e)}))},n.state={document:{},amount:0,profil:{}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getWalletAmount(),this.getMonProfil()}},{key:"render",value:function(){return r.a.createElement(g.a,{className:"cagnotteCont"},r.a.createElement(E.a,{className:"rowCagn"},r.a.createElement(f.a,null,r.a.createElement("h1",null,"Montant de vos pourboires :"),r.a.createElement("h2",null,r.a.createElement("strong",null,this.state.amount/100," euros")),r.a.createElement(v.a,{onClick:this.payoutMangoPay},"Retirer votre argent"),r.a.createElement("br",null),r.a.createElement("p",null,this.state.messageTransfert))),r.a.createElement(E.a,{className:"rowPasDeCagn"},r.a.createElement(f.a,null,r.a.createElement("h5",{className:"rappelKYC"}," ",'Pas encore de cagnotte pour percevoir vos pourboires ? Suivez les \xe9tapes dans la partie "Mes Documents" !'))))}}]),a}(n.Component)),$=(a(533),a(534),a(535),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).change=function(e){var t=n.state.referent;t[e.target.name]=e.target.value,n.setState({referent:t})},n.getReferentWallet=function(){var e=new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"});fetch("https://back-end.osc-fr1.scalingo.io/serveur/referentWallet",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){var t=e;n.setState({amount:t})}),(function(e){console.log(e)}))},n.getWaiterList=function(){var e=new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"});fetch("https://back-end.osc-fr1.scalingo.io/serveur/waiterList",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){n.setState({waiter:e}),console.log("object",e)}),(function(e){console.log(e)}))},n.renderMesServeurs=function(){return n.state.waiter.tabServeur.map((function(e){return r.a.createElement(f.a,{className:"nameServ",xs:12,s:12,md:6},r.a.createElement("h3",null,r.a.createElement("strong",null,e.serveurName,"",e.serveurLastName)),r.a.createElement("br",null),r.a.createElement(S.a,null,r.a.createElement(S.a.Control,{type:"number",placeholder:"Montant du transfert",name:"amount",onChange:n.change})),r.a.createElement(v.a,{className:"CollectButton",type:"submit",onClick:function(){var t=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")}),a={email:e.serveurMail,amount:n.state.referent.amount},r={method:"POST",headers:t,body:JSON.stringify(a)};fetch("https://back-end.osc-fr1.scalingo.io/serveur/referentTransfert",r).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message}),n.getReferentWallet()}),(function(e){console.log(e)}))}},"Envoyer"))}))},n.state={waiter:{tabServeur:[]},referent:[]},n}return Object(c.a)(a,[{key:"componentShouldUpdate",value:function(){this.getWaiterList(),console.log("serveur",this.state.waiter.tabServeur,this.state.referent)}},{key:"componentDidMount",value:function(){this.getReferentWallet(),this.getWaiterList()}},{key:"render",value:function(){return r.a.createElement(g.a,{className:"mesHisto"},r.a.createElement(E.a,{className:"commentaireHisto"},r.a.createElement(f.a,{xs:12,s:12,md:12},r.a.createElement("h1",null,"Montant du pot commun :"),r.a.createElement("h2",{className:"montantCo"},r.a.createElement("strong",null,this.state.amount/100," euros")),r.a.createElement("p",null,"Les frais de gestion seront automatiquement pr\xe9lev\xe9s de la part distribu\xe9e \xe0 chaque b\xe9n\xe9ficiaire."),r.a.createElement("h1",null,"Liste des b\xe9n\xe9ficiaires:"))),r.a.createElement(E.a,{className:"rowServeurCo"},this.renderMesServeurs()),r.a.createElement("p",{style:{textAlign:"center"}},this.state.message))}}]),a}(n.Component)),ee=(a(536),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).addBankAccount=function(e){e.preventDefault();var t={adress:n.state.adress,password:n.state.password,city:n.state.city,region:n.state.region,zip:n.state.zip,iban:n.state.iban,country:n.state.country},a=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+localStorage.getItem("token")}),r={method:"POST",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/mangoBank",r).then((function(e){return e.json()})).then((function(e){"param_error"===e.Type?window.alert("Une erreur s'est produite, veuillez r\xe9essayer."):window.alert("Votre compte bancaire \xe0 bien \xe9t\xe9 enregistr\xe9 vous pouvez maintenant retirer votre argent.")}))},n.payoutMangoPay=function(e){e.preventDefault();var t={adress:n.state.adress,password:n.state.password,city:n.state.city,region:n.state.region,zip:n.state.zip,iban:n.state.iban},a=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+localStorage.getItem("token")}),r={method:"POST",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/payoutMango",r).then((function(e){return e.json()})).then((function(e){n.setState({messageTransfert:e.messageTransfert})}))},n.change=function(e){var t=n.state.document;t[e.target.name]=e.target.value,n.setState({document:t})},n.handleInput=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault();var t=new FormData(e.target),a=new Headers({Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/mangoKYC",{method:"POST",body:t,headers:a}).then((function(e){return e.json()})).then((function(e){console.log("ezeza",e),0==e.success?window.alert("Une erreur s'est produite, veuillez r\xe9essayer. Pensez \xe0 v\xe9rifier la/les taille(s) de votre/vos image(s)"):(console.log(e),window.alert("Vos documents ont bien \xe9t\xe9 envoy\xe9s une r\xe9ponse vous sera fourni dans les 24 heures."))}))},n.checkKyc=function(){console.log("coucouuuu");var e=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/kyc-statut",{method:"get",headers:e}).then((function(e){return e.json()})).then((function(e){console.log("kyc",e)}))},n.renderFormulaireRib=function(){},n.getMonProfil=function(){var e=new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"});fetch("https://back-end.osc-fr1.scalingo.io/serveur/monProfil",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){var t=e;n.setState({profil:t}),console.log("KYC statut",n.state.profil.kycStatut),t.mangoBankAcc?n.setState({ribOrNot:!0}):n.setState({ribOrNot:!1}),"VALIDATED"==t.kycStatut?n.setState({kycOrNot:!0}):n.setState({ribOrNot:!1})}),(function(e){console.log(e)}))},n.state={document:{},profil:{},country:"FR",ribOrNot:!1,kycOrNot:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.checkKyc(),this.getMonProfil()}},{key:"render",value:function(){var e=this;return r.a.createElement(g.a,{className:"cagnotteCont"},r.a.createElement(E.a,{className:"rowId"},this.state.kycOrNot?null:r.a.createElement(f.a,null,r.a.createElement("div",{className:"kyc"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("p",{className:"titleKyc"},"Confirmation d'identit\xe9 "),r.a.createElement("p",null,"( Vous pouvez mettre deux images/document PDf maximum 32 Kb taille maximum: 10Mb )"),r.a.createElement("input",{enctype:"multipart/form-data",className:"chargePic",type:"file",name:"file",multiple:!0,accept:"image/png, image/jpeg, image/jpg, image/pdf , application/pdf"}),r.a.createElement(v.a,{type:"submit"},"T\xe9l\xe9charger")),this.state.message)),r.a.createElement("div",{className:"kycStatut"},r.a.createElement("p",{className:"kycTitleStatut"},"Statut de vos documents:"),r.a.createElement("div",{className:"statut"},r.a.createElement("p",{className:"statutValid"},"VALIDATED"===this.state.profil.kycStatut?"Valid\xe9":""),r.a.createElement("p",{className:"statutRefused"},"REFUSED"===this.state.profil.kycStatut?" Document refus\xe9 veuillez vous assurer que la carte d'identit\xe9 n'ai pas \xe9t\xe9 retouch\xe9 et que le recto et le verso soit bien visible sur la m\xeame page.":""),r.a.createElement("p",{className:"statutIn"},"REFUSED"!==this.state.profil.kycStatut&&"VALIDATED"!==this.state.profil.kycStatut?"En Cours":"")))),r.a.createElement(E.a,{style:{textAlign:"center",justifyContent:"center"}},this.state.ribOrNot?r.a.createElement(v.a,{onClick:function(){e.setState({ribOrNot:!1})}},"Changer votre RIB"):r.a.createElement(f.a,null,r.a.createElement(S.a,null,r.a.createElement(S.a.Control,{type:"text",placeholder:"Votre Adresse",name:"adress",onChange:this.handleInput,value:this.state.adress}),r.a.createElement(S.a.Control,{type:"text",placeholder:"Code Postal",name:"zip",onChange:this.handleInput,value:this.state.zip}),r.a.createElement(S.a.Control,{type:"text",placeholder:"Ville",name:"city",onChange:this.handleInput,value:this.state.city}),r.a.createElement(S.a.Control,{type:"text",placeholder:"Votre r\xe9gion, PACA, AQUITAINE, BRETAGNE... ",name:"region",onChange:this.handleInput,value:this.state.region}),r.a.createElement(S.a.Control,{type:"text",placeholder:"Votre IBAN, FRXXXXXXXXXXXXXXXXXX",name:"iban",onChange:this.handleInput,value:this.state.iban}),r.a.createElement(S.a.Control,{as:"select",type:"text",name:"country",onChange:this.handleInput,value:this.state.country},r.a.createElement("option",null,"FR"),r.a.createElement("option",null,"DE"),r.a.createElement("option",null,"LT"),r.a.createElement("option",null,"GB"),r.a.createElement("option",null,"AT"),r.a.createElement("option",null,"BE"),r.a.createElement("option",null,"BG"),r.a.createElement("option",null,"CY"),r.a.createElement("option",null,"DK"),r.a.createElement("option",null,"ES"),r.a.createElement("option",null,"EE"),r.a.createElement("option",null,"FI"),r.a.createElement("option",null,"GR"),r.a.createElement("option",null,"HU"),r.a.createElement("option",null,"IE"),r.a.createElement("option",null,"IT"),r.a.createElement("option",null,"LV"),r.a.createElement("option",null,"LU"),r.a.createElement("option",null,"MT"),r.a.createElement("option",null,"NL"),r.a.createElement("option",null,"PL"),r.a.createElement("option",null,"PT"),r.a.createElement("option",null,"CZ"),r.a.createElement("option",null,"RO"),r.a.createElement("option",null,"SK"),r.a.createElement("option",null,"SI"),r.a.createElement("option",null,"SE"))),r.a.createElement(v.a,{className:"butBankAcc",type:"submit",onClick:this.addBankAccount},"Envoyez vos informations bancaires"),r.a.createElement("br",null),r.a.createElement("br",null),this.state.messageBA)))}}]),a}(n.Component)),te=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setLogin=function(e){n.setState({login:e})},n.state={login:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){null!=localStorage.getItem("token")&&this.setState({login:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(d.a,null,r.a.createElement("div",{className:"main-container"},r.a.createElement(V,{setLogin:this.setLogin,login:this.state.login}),r.a.createElement(K.c,null,r.a.createElement(K.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(k,Object.assign({setLogin:e.setLogin},t))}}),r.a.createElement(K.a,{path:"/inscription",component:I}),r.a.createElement(K.a,{path:"/inscriptionParrainage",component:j}),r.a.createElement(K.a,{path:"/mesDocuments",component:ee}),r.a.createElement(K.a,{path:"/monProfil",component:w}),r.a.createElement(K.a,{path:"/modifierMonProfil",component:H}),r.a.createElement(K.a,{path:"/mesTips",component:M}),r.a.createElement(K.a,{path:"/mesHistoriques",component:Q}),r.a.createElement(K.a,{path:"/passwordReset",component:U}),r.a.createElement(K.a,{path:"/passwordRenew",component:W}),r.a.createElement(K.a,{path:"/cagnotte",component:Z}),r.a.createElement(K.a,{path:"/referent",component:$})),r.a.createElement(_,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[208,1,2]]]);
//# sourceMappingURL=main.faebbc1d.chunk.js.map